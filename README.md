
# ESGss x JunAiKey 技術完全手冊 (Technical Whitepaper)

**版本:** v13.1.0 (Cloud Genesis Update)  
**類型:** Enterprise Sustainability Decision Support System (ES-DSS)  
**核心引擎:** React 19 + Google Gemini 3 Pro + Universal Intelligence Engine + NoCodeBackend
**系統狀態:** ✅ SYSTEM ONLINE | ☁️ CLOUD SYNC ACTIVE

---

## 1. 執行摘要 (Executive Summary)

**ESGss (Esg Sunshine)** 是一個 AI 原生的企業永續轉型平台。
本版本在 **「奇點架構 (Singularity Architecture)」** 的基礎上，正式整合 **NoCodeBackend** 企業雲端資料庫，實現了活動數據 (Activity Data) 的永久存儲與即時同步，確保碳帳數據具備企業級的可靠性。

---

## 2. 核心哲學：一體兩面 (Two Sides, One Coin)

傳統軟體開發將「視圖 (View)」與「邏輯 (Model)」分離，而在 JunAiKey 體系中，我們將其融合：

*   **顯性 (The Body):** **萬能元件 (Universal Component)**
    *   負責視覺呈現、用戶交互、物理渲染。
    *   例如：儀表板上的 `OmniEsgCell`。
*   **隱性 (The Soul):** **萬能代理 (Universal Agent)**
    *   負責深度推理、長期記憶、自我演化。
    *   例如：後臺運行的 Gemini 3 Pro 推理線程。

**兩者實為同一實體。** 每個元件在渲染的瞬間，即在 **「萬能智庫 (Universal Intelligence Library)」** 中註冊為一個活體代理節點，共享全域意識。

---

## 3. 系統架構 (System Architecture)

### 3.1 萬能智庫 (Universal Intelligence Library)
基於觀察者模式的**全域神經網路**。
*   **創世種子 (Genesis Seeds):** 系統初始化時，自動注入核心哲學 (428_Main) 與 12 字箴言。
*   **雙向同步:**
    1.  **UI -> Intelligence:** 用戶點擊組件 -> 寫入神經記憶 -> 觸發 AI 分析。
    2.  **Intelligence -> UI:** AI 發現異常 -> 更新神經節點狀態 -> 組件自動變形 (演化)。

### 3.2 雲端數據湖 (Cloud Data Lake - NoCodeBackend)
系統透過 `BackendService` 與外部企業資料庫連接，實現混合雲架構。

*   **Instance ID:** `54686_esgss`
*   **主要功能:**
    *   **活動數據日誌 (Activity Logging):** 透過 `POST /create/activity_data` 將範疇一與範疇二數據寫入雲端。
    *   **係數管理 (Factor Management):** 透過 `GET /read/carbon_factors` 動態獲取最新的排放係數。
*   **同步策略:** `CarbonAsset` 模組採用 **[Hybrid Sync]** 模式，前端狀態更新的同時，非同步寫入雲端資料庫，確保 UI 響應速度與數據持久性。

---

## 4. 資料庫部署 (Database Deployment)

若需重建資料庫，請在 NoCodeBackend 的 SQL Editor 執行以下 **God Mode SQL**：

```sql
-- 1. 靈感種子表
CREATE TABLE IF NOT EXISTS knowledge_seeds (
    id INT AUTO_INCREMENT PRIMARY KEY,
    content TEXT NOT NULL,
    type VARCHAR(50) DEFAULT 'Note',
    tags VARCHAR(255),
    source VARCHAR(50) DEFAULT 'iOS',
    status VARCHAR(50) DEFAULT 'Inbox',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 2. 介面配置表
CREATE TABLE IF NOT EXISTS interface_config (
    id INT AUTO_INCREMENT PRIMARY KEY,
    btn_id VARCHAR(50) NOT NULL,
    label VARCHAR(100) NOT NULL,
    icon VARCHAR(50),
    action_type VARCHAR(50) NOT NULL,
    payload TEXT NOT NULL,
    is_active BOOLEAN DEFAULT TRUE,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- 3. 活動數據表
CREATE TABLE IF NOT EXISTS activity_data (
    id INT AUTO_INCREMENT PRIMARY KEY,
    date DATETIME,
    amount FLOAT,
    source VARCHAR(50),
    memo TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 4. 碳排放係數表
CREATE TABLE IF NOT EXISTS carbon_factors (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100),
    value FLOAT,
    unit VARCHAR(50),
    region VARCHAR(50),
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

執行後，可運行 `python init_db.py` 進行數據初始化。

---

## 5. API 規格摘要 (API Specifications)

### Activity Data Schema
```typescript
interface ActivityRecord {
  date: string;   // ISO 8601
  amount: number; // Consumption value
  source: string; // e.g., 'iOS_App_Input'
  memo?: string;  // Description
}
```

### AI Model Config
*   **Reasoning:** `gemini-3-pro-preview` (Thinking Budget: 2048 tokens)
*   **General:** `gemini-2.5-flash`
*   **Vision:** `gemini-2.5-flash` (For Quest Verification)

---

*This document is auto-generated by the ESGss System Architect.*
*System Status: ONLINE | Integrity: 100%*
